<script lang="ts">
    import { fly } from "svelte/transition";

    let { id } = $props();
    let username : string = $state("");
    let email : string = $state("");

    async function getData(params:string) {
        const res = await fetch(`/api/profile?id=${params}`);
        const data = await res.json();
        username = data.name;
        email = data.email;
    }
</script>

<div >
    <div class="inline-block bg-[#efc29f] text-gray-700 p-2 mb-4">
        <h5>üí°IDOR (Insecure Direct Object Reference)</h5>
        <p class="text-sm">‡∏ä‡πà‡∏≠‡∏á‡πÇ‡∏´‡∏ß‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠</p>
        <br>
        <p>‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏≤‡∏á API ‡πÅ‡∏ö‡∏ö‡∏õ‡∏Å‡∏ï‡∏¥‡πÉ‡∏´‡πâ‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏ó‡∏µ‡πà API ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
    </div>
    <br>
    <button onclick={() => getData(id)} style="font-family: 'Fusion Pixel 8px Proportional TC', sans-serif;" type="submit" class="border rounded px-2 py-0.5 bg-blue-500 text-white">Fetch</button>
    <p id="detail" class=" inline-block bg-[#efc29f]  px-2 py-0.5 rounded">üí° ‡∏•‡∏≠‡∏á Inspect ( F12 ) </p>
    <br>
    {#if username}
    <div class="mt-4 inline-block bg-[#ffeed0] border-[3px] border-[#5d3a00] rounded-none p-3 shadow-[4px_4px_0_#5d3a00] text-[#3a2500]" transition:fly={{ y: 10, duration: 400 }}>
    <p class="font-bold">üßë Name : {username}</p>
    <p>üíª Email : {email}</p>
    </div>
    {/if}
</div>