<script lang="ts">
    import { fly } from "svelte/transition";
    let id : number = $state(0);
    let username : string = $state("");
    let email : string = $state("");
    async function getData(params:string) {
        const res = await fetch(`/api/profile?id=${params}`);
        const data = await res.json();
        username = data.name;
        email = data.email;
    }
</script>

<div>
    <div class="inline-block bg-[#efc29f] text-gray-700 p-2 mb-4">
        <h3>üé≤Guessing & Predicting Pattern</h3>
        <p class="text-sm">‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏à‡∏≤‡∏Å API ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏µ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏≤‡∏î‡πÄ‡∏î‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏∏‡πà‡∏°‡∏´‡∏≤‡πÑ‡∏î‡πâ‡∏™‡πà‡∏á‡∏ú‡∏•‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á API ‡∏≠‡∏∑‡πà‡∏ô‡πÜ‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á</p>
        <p>‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏°‡∏á‡∏ß‡∏î‡∏™‡πà‡∏á‡∏ú‡∏•‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á Broken Access Control</p>
        <br>
        <p>‡πÉ‡∏´‡πâ‡∏ó‡∏î‡∏•‡∏≠‡∏á‡πÉ‡∏ä‡πâ id (1 ,3) ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ç‡∏≠‡∏á‡∏ï‡∏ô‡πÄ‡∏≠‡∏á</p>
    </div>

    <div class="mb-3 w-fit bg-[#ffeed0] border-[3px] border-[#5d3a00] p-2 shadow-[4px_4px_0_#5d3a00]">
    <label for="idInput" class="text-[#3a2500] text-sm mr-1">üí° /api/profile?id=</label>
    <input
      id="idInput"
      bind:value={id}
      placeholder="id"
      class="px-1 border-2 border-[#5d3a00] bg-[#fff6ea] text-[#3a2500] w-24 focus:outline-none focus:bg-white text-center inline-block"/>
      <button onclick={() => getData(String(id))} style="font-family: 'Fusion Pixel 8px Proportional TC', sans-serif;" type="submit" class="border rounded px-2 py-0.5 bg-blue-500 text-white inline-block">Fetch</button>
    </div>
    {#if username}
    <div class="mt-4 inline-block bg-[#ffeed0] border-[3px] border-[#5d3a00] rounded-none p-3 shadow-[4px_4px_0_#5d3a00] text-[#3a2500]" in:fly={{ y: 10, duration: 400 }}>
    <p class="font-bold">üßë Name : {username}</p>
    <p>üíª Email : {email}</p>
    </div>
    {/if}
</div>